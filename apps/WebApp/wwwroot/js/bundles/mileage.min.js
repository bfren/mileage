function showAlert(n,t){(message.find(".icon").html(alertIcons[n]),message.find(".text").text(t),message.find(".countdown").text(""),message.show(),clearTimeout(alertTimeout),n!="error")&&updateAlert(5)}function updateAlert(n){if(n==0){closeAlert();return}message.find(".countdown").text(n);alertTimeout=setTimeout(()=>updateAlert(n-1),1e3)}function closeAlert(){message.slideUp()}function showAlertsOnLoad(){}function handleResult(n){showAlert(n.message.type,n.message.text);n.redirectTo&&(showAlert("info","Redirecting, please wait..."),window.location.href=n.redirectTo)}function setupAjaxSubmit(){$("form").submit(function(n){n.preventDefault();showAlert("info","Please wait...");var t=$(this),i=t.attr("action"),r=t.serialize();$.ajax({url:i,method:"POST",data:r,dataType:"json"}).done(function(n){handleResult(n)}).fail(function(n){handleResult(n.responseJSON)})})}const alertIcons={close:$("<i/>").addClass("fa-solid fa-xmark"),info:$("<i/>").addClass("fa-solid fa-circle-info"),success:$("<i/>").addClass("fa-solid fa-check"),warning:$("<i/>").addClass("fa-solid fa-triangle-exclamation"),error:$("<i/>").addClass("fa-solid fa-ban"),edit:$("<i/>").addClass("fa-solid fa-circle-plus"),"delete":$("<i/>").addClass("fa-solid fa-circle-minus"),complete:$("<i/>").addClass("fa-solid fa-circle-check"),save:$("<i/>").addClass("fa-solid fa-ban")},message=$(".statusbar .message");var alertTimeout=0;ready(function(){message.click(function(){closeAlert()})});ready(showAlertsOnLoad);ready(setupAjaxSubmit);